{"version":3,"file":"unknown","sources":["unknown"],"names":["$","loadMoreApply","complete","oLoader","page","data","oWrap","ajax","type","url","product","CMNT","group","index","dataType","timeout","success","rs","status","list","html","total","Math","ceil","_list","len","length","str","section","i","main","reply","sub_sec","wbuser","is_wb","stitle","tstitlecon","mid","wbname","face","nick","source","j","cnt","surl","content","substring","substr","time","agree","window","removeEventListener","addcomment","error","xhr","alert","moreList","document","on","that","this","more","next","remove","removeClass","initPopInput","onSmt","_input","_check","_wrap","parent","val","attr","eq","show","addClass","setTimeout","hide","indexOf","towb","userInfo","uname","__userface","newslist","is","prepend","portrait_url","userface","scrollTo","offset","top","vcode","csrfcode","csrftime","wburl","vt","cmntContent","onCmnt","pop","input","find","split","oComment","commentShow","sendMessage","Success","_this","append","entrance","css","items","item","floors","oCmnt","cmnt_nick","cmnt_sourse","cmnt_time","base","text","last","wb_content","_base","_top","_text","call","Comment","cmtsmtCallBack","ev","checkLogin","blur","commentlogin","WapLogin","login","_addFloat","_addEvent","focus","preventDefault","logsuccess","singlelogin","initUnfold","wrap","pre","prev","sections","quote","initFavor","hasClass","op","voteNum","parseInt","__tj_ch","getWinHeight","wHeight","innerHeight","body","clientHeight","documentElement","initEntrance","clearInterval","timer","setInterval","scrollY","scrollTop","pullLoader","oMainpage","onresize","addEventListener","loading","sTop","dHeight","height","cHeight","isload","suda","sudaName","clickInfo","name","title","suds_count","insertReportList","arr","push","join","addEvent","chooseReason","oBg","oReportbox","oReport","obj","parents","sendData","charge_uid","charge_ip","ch","newsid","location","href","jsoncallback","$curReportBox","prevent","aA","oSmt","oCancel","oTipsReport","sendReport","report","bind","nextFun","closeFun","waplogin","async","e","changeFunction","console","log","re"],"mappings":"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","sourcesContent":["$(function(){\r\n\tfunction loadMoreApply(complete){\r\n\t\tvar oLoader = $('#j_pullLoader'),\r\n\t\t\tpage = oLoader.data('page') || 2,\r\n\t    \tlist = oLoader.data('type'),\r\n\t    \toWrap = $('#j_newslist');\r\n\t    \t\t$.ajax({\r\n\t\t\t\t\ttype: 'GET',\r\n\t\t\t\t\turl: 'http://cmnt.sina.cn/aj/cmnt/list?',\r\n\t\t\t\t\t  // data to be added to query string:\r\n\t\t\t\t\t /*data: { product: \"comos\",group:\"1\", index: \"awzuney4946469\",page: 2},*/\r\n\t\t\t\t\t\r\n\t\t\t\t\tdata: { product: CMNT.product,group:CMNT.group, index: CMNT.index,page: page},\r\n\t\t\t\t\t  \t\t\t\t\t  // type of data we are expecting in return:\r\n\t\t\t\t\tdataType: 'jsonp',\r\n\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\tsuccess: function(rs){\r\n\t\t\t\t\t\tif(rs.status){\r\n\t\t\t\t\t\t\tvar list = oWrap.html(),\r\n\t\t\t\t\t\t\t    total = Math.ceil(rs.data.total / 20),\r\n\t\t\t\t\t\t\t    _list = rs.data.data;\r\n\t\t\t\t\t\t\tif(!_list)return;\r\n\t\t\t\t\t\t\tvar len = _list.length,\r\n\t\t\t\t\t\t\t    str = '',\r\n\t\t\t\t\t\t\t    section = '';\r\n\t\t\t\t\t\t\tfor(var i = 0; i < len; i ++){\r\n\t\t\t\t\t\t\t\tvar main = _list[i].main,\r\n\t\t\t\t\t\t\t\t    reply = _list[i].reply||[],\r\n\t\t\t\t\t\t\t\t    sub_sec = [],\r\n\t\t\t\t\t\t\t\t    wbuser = main.is_wb,\r\n\t\t\t\t\t\t\t\t    stitle = '',\r\n\t\t\t\t\t\t\t\t    tstitlecon = '';\r\n\t                            str += '<div class=\"cmnt_item\" data-mid=\"' + main.mid + '\" data-wbuser= \"' + wbuser + '\" data-wbname= \"' + main.wbname + '\"><p class=\"cmnt_top\"><span><img src=\"' + main.face + '\" /><i class=\"cmnt_nick\">'+ main.nick + '<em>'+ main.source+ '</em></i></span></p>';\r\n\t                            if(reply.length < 4){\r\n\t\t                        \tfor(var j = 0, section = '', cnt = ''; j < reply.length; j++){\r\n\t\t                        \t\tif(reply[j].surl && !!reply[j].surl){\r\n\t\t\t                        \t\tif(reply[j].stitle && !!reply[j].stitle){\r\n\t\t\t                        \t\t\ttstitlecon = '<p class=\"cmnt_quote\"><a href=\"'+reply[j].surl+'\">'+reply[j].stitle+'</a></p>';\r\n\t\t\t                        \t\r\n\t\t\t                        \t\t}\r\n\t\t\t                        \t}\r\n\t\t                        \t\tif(reply[j].content.length > 200)cnt = reply[j].content.substring(0, 199) + '<a class=\"j_cmnt_more\">查看全文>></a><span class=\"hide\">' + reply[j].content.substr(200) + '</span>';\r\n\t\t                        \t\telse cnt = reply[j].content;\r\n\t\t                                section = '<div class=\"cmnt_base\">' + section + '<p class=\"cmnt_top\"><span>' + reply[j].nick + '</span><span class=\"cmnt_source\">'+ reply[j].time +'&nbsp;&nbsp;'+ reply[j].source +'</span><code>' + (j + 1) + '</code></p><p class=\"cmnt_text\">' + cnt + '</p>'+ tstitlecon +'</div>';\r\n\t\t                            }\r\n\t\t                        }else{\r\n\t\t                        \tfor(var j = 0, cnt = ''; j < reply.length; j++){\r\n\t\t                        \t\tif(reply[j].surl && !!reply[j].surl){\r\n\t\t\t                        \t\tif(reply[j].stitle && !!reply[j].stitle){\r\n\t\t\t                        \t\t\ttstitlecon = '<p class=\"cmnt_quote\"><a href=\"'+reply[j].surl+'\">'+reply[j].stitle+'</a></p>';\r\n\t\t\t                        \t\r\n\t\t\t                        \t\t}\r\n\t\t\t                        \t}\r\n\t\t                        \t\tif(reply[j].content.length > 200)cnt = reply[j].content.substring(0, 199) + '<a class=\"j_cmnt_more\">查看全文>></a><span class=\"hide\">' + reply[j].content.substr(200) + '</span>';\r\n\t\t                        \t\telse cnt = reply[j].content;\r\n\t                                    sub_sec[j] = '<p class=\"cmnt_top\"><span>' + reply[j].nick + '</span><span class=\"cmnt_source\">'+ reply[j].time +'&nbsp;&nbsp;'+ reply[j].source +'</span><code>' + (j + 1) + '</code></p><p class=\"cmnt_text\">' + cnt + '</p>'+ tstitlecon +'</div>';\r\n\t\t                            }\r\n\t\t                            for(var j = 0, section = '', cnt = ''; j < reply.length; j++){\r\n\t\t                            \tif(reply[j].surl && !!reply[j].surl){\r\n\t\t\t                        \t\tif(reply[j].stitle && !!reply[j].stitle){\r\n\t\t\t                        \t\t\ttstitlecon = '<p class=\"cmnt_quote\"><a href=\"'+reply[j].surl+'\">'+reply[j].stitle+'</a></p>';\r\n\t\t\t                        \t\t\r\n\t\t\t                        \t\t}\r\n\t\t\t                        \t}\r\n\t\t                            \tif(reply[j].content.length > 200)cnt = reply[j].content.substring(0, 199) + '<a class=\"j_cmnt_more\">查看全文>></a><span class=\"hide\">' + reply[j].content.substr(200) + '</span>';\r\n\t\t                        \t\telse cnt = reply[j].content;\r\n\t                                    if(j == 0)section = '<div class=\"cmnt_base\"><p class=\"cmnt_top\"><span>' + reply[j].nick + '</span><span class=\"cmnt_source\">'+ reply[j].time +'&nbsp;&nbsp;'+ reply[j].source +'</span><code>' + (j + 1) + '</code></p><p class=\"cmnt_text\">' + cnt + '</p>'+ tstitlecon +'</div>';\r\n\t                                    else if(j == 1 || j > reply.length - 2)section = '<div class=\"cmnt_base\">' + section + '<p class=\"cmnt_top\"><span>' + reply[j].nick + '</span><span class=\"cmnt_source\">'+ reply[j].time +'&nbsp;&nbsp;'+ reply[j].source +'</span><code>' + (j + 1) + '</code></p><p class=\"cmnt_text\">' + cnt + '</p>'+ tstitlecon +'</div>';\r\n\t                                    else if(j == 2)section += '<a class=\"cmnt_unfold j_cmnt_unfold\" href=\"javascript:void(0);\"><i></i>点击展开隐藏楼层</a><div class=\"hide\"><p class=\"cmnt_top\"><span>' + reply[j].nick + '</span><span class=\"cmnt_source\">'+ reply[j].time +'&nbsp;&nbsp;'+ reply[j].source +'</span><code>' + (j + 1) + '</code></p><p class=\"cmnt_text\">' + cnt + '</p>'+ tstitlecon +'</div>';\r\n\t                                    else section += '<div class=\"hide\"><p class=\"cmnt_top\"><span>' + reply[j].nick + '</span><span class=\"cmnt_source\">'+ reply[j].time +'&nbsp;&nbsp;'+ reply[j].source +'</span><code>' + (j + 1) + '</code></p><p class=\"cmnt_text\">' + cnt + '</p>'+ tstitlecon +'</div>';\r\n\t                                }\r\n\t\t                        }\r\n\t\t                        if(reply.length == 0) { \r\n\t\t                        \tif(main.surl && !!main.surl){\r\n\t\t                        \t\tif(main.stitle && !!main.stitle){\r\n\t\t                        \t\t\r\n\t\t                        \t\t\tstitle = '<p class=\"cmnt_quote\"><a href=\"'+main.surl+'\">'+main.stitle+'</a></p>';\r\n\t\t                        \t\t}\r\n\t\t                        \t}\r\n\t\t                        }\r\n\t                            str += section + '<p class=\"cmnt_text\">' + main.content + '</p>'+stitle+'<div class=\"cmnt_op_bottom clearfix\"><p class=\"cmnt_op_bottom_times\">'+ main.time +'</p><a class=\"cmnt_op_bottom_report j_report\" href=\"javascript:;\" data-mid=\"' + main.mid + '\">举报</a><span class=\"cmnt_op\"><a href=\"javascript:void(0);\" title=\"赞\" class=\"good j_favor_single\">'+ main.agree +'</a><a href=\"javascript:void(0);\" title=\"评论\" class=\"cmntico j_cmnt_single\"></a></span></div></div>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t    oWrap.html(list + str);\r\n\t\t\t\t\t\t    \r\n\t\t\t\t\t\t    if(page >= total){\r\n\t\t\t\t\t\t    \t$('.cmnt_more p').html('已加载全部评论');\r\n\t\t\t\t\t\t    \twindow.removeEventListener('scroll', addcomment, false);\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t    oLoader.data('page', page + 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t    complete && complete();\r\n\t\t\t\t    },\r\n\t\t\t\t\terror: function(xhr, type){\r\n\t\t\t\t\t\talert('亲，网络出现错误，请重试')\r\n\t\t\t\t\t\tcomplete && complete();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t}\r\n    function moreList(){\r\n        $(document).on('click tap', '.j_cmnt_more', function(){\r\n        \tvar that = $(this),\r\n        \t    more = that.next();\r\n        \tthat.remove();\r\n        \tmore.removeClass('hide');\r\n        });\r\n    }\r\n    function prevent(e) {\r\n    \t//弹出评论框状态下禁止页面滚动\r\n\t\tif(!$('#j_cmnt_pop').css())e.preventDefault();\r\n\t\treturn;\r\n\t}\r\n\tfunction initPopInput(){\r\n\t\tvar oComment = new Comment({\r\n     \t\t\tmain : $('#mainpage'),\r\n     \t\t\tcmtsmtCallBack : function(content, Success, _this){//发评论的回调\r\n\t\t     \t\tsendMessage(content, Success, _this);\r\n\t\t     \t}\r\n     \t\t});\r\n\t    var pop = $('#j_cmnt_pop'),\r\n\t\t\tinput = $('#j_cmnt_input'),\r\n\t\t\tentrance = $('#j_cmnt_entrance'),\r\n\t\t\tdefaultCnt = input.attr('placeholder'),\r\n\t\t\tnewslist = $('#j_newslist');\r\n\t\t\r\n\t\t$('#j_input_top').on('focus',function(ev){\r\n\t\t\tif(!checkLogin()){\r\n\t\t\t\t$('#j_input_top').blur();\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\t$('#j_input_top').on('click',function(ev){\r\n\t\t\t// if($('.foot_comment').length>0){\r\n\t\t\t// \t$('.foot_comment').hide();\r\n\t\t\t// }\r\n\t\t\t$('.foot_comment').hide();\r\n\t\t\tif(checkLogin()){\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tcommentlogin = (typeof(WapLogin)== 'function') ?(new WapLogin()):this;\r\n\t\t\t\t\tcommentlogin.login (false,function(){\r\n\t\t\t\t\t\t// logsuccess();\r\n\t\t\t\t\t\toComment._addFloat();\r\n\t\t\t\t\t\toComment._addEvent();\r\n\t\t\t\t\t\tpop = $('#j_cmnt_pop'),\r\n\t\t\t\t\t\tinput = $('#j_cmnt_input');\r\n\t\t\t\t\t\t$('#j_input_top').focus();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tev.preventDefault();\r\n\t\t\t}\r\n\t\t})\r\n\t\t$(document).on('click tap', '#j_input_smt', function(){\r\n\t\t\t\t onSmt.call(this);\r\n\t\t});\r\n\t\twindow.logsuccess=function(rs){\r\n\t\t\t$('#loginImg img').attr('src',(userInfo.portrait_url || userInfo.userface));\r\n\t\t\t$('#logoutImg').hide();\r\n\t\t\t$('#loginImg').show();\r\n\t\t\t\r\n\t\r\n\t\t}\r\n\t\tfunction onSmt(){\r\n        \tvar _input = $('#j_input_top'),\r\n        \t    _check = $('#j_input_check'),\r\n        \t    _wrap = _input.parent(),\r\n        \t    that = $(this);\r\n\t\t    if(_input.val() == '' || _input.val() == _input.attr('placeholder')){\r\n\t\t    \t$('.j_op_remind').eq(0).show().html('请输入评论内容！').addClass('animate');\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t}, 3000);\r\n\t\t    }else{\r\n\t\t    \tif(_input.val().indexOf('script') == -1){\r\n\t\t    \t\t_wrap.removeClass('_unfold');\r\n\t\t\t\t\t//对文章评论\r\n                    var nick = userInfo.nick || userInfo.uname || '手机新浪网用户';\r\n\t                var append = '<div class=\"cmnt_item\"><p class=\"cmnt_top\"><span><img src=\"' + __userface + '\" /><i class=\"cmnt_nick\">' + nick + '</i><i class=\"cmnt_time\">刚刚</i></span></p><p class=\"cmnt_text\">' + _input.val() + '</p></div>',\r\n\t                    str = newslist.html(),\r\n\t                    towb;\r\n\t                if(_check.is(\":checked\"))towb = 1;\r\n\t                else towb = '';\r\n\t                var content = _input.val();\r\n\t                _input.val('');\r\n\t                $('#j_newslist').prepend('<div class=\"cmnt_item\"><p class=\"cmnt_top\"><span><img src=\"' + (userInfo.portrait_url || userInfo.userface) + '\" /><i class=\"cmnt_nick\">' + nick + '</i></span></p><p class=\"cmnt_text\">' + content + '</p><div class=\"cmnt_op_bottom\"><p class=\"cmnt_op_bottom_times\">刚刚</p></div></div>');\r\n\t                if($('.cmnt_title').length > 1)window.scrollTo(0, $('.cmnt_title').eq(1).offset().top - 10);\r\n\t\t\t    \tif($('#tipsCeng').length>0){\r\n\t\t\t    \t\t$('#tipsCeng').show();\r\n\t\t\t    \t\tsetTimeout(function(){\r\n\t\t\t    \t\t\t$('#tipsCeng').hide();\r\n\t\t\t    \t\t},1500)\r\n\t\t\t    \t}\r\n\t\t\t    \t$.ajax({\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: 'aj/cmnt/post?',\r\n\t\t\t\t\t\t  // data to be added to query string:\r\n\t\t\t\t\t\tdata: { product: CMNT.product, index: CMNT.index, vcode: CMNT.vcode, csrfcode : CMNT.csrfcode, csrftime : CMNT.csrftime, wburl : CMNT.wburl, vt: 4,  cmntContent: content, towb: towb},\r\n\t\t\t\t\t\t  // type of data we are expecting in return:\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\tif(data.status){\r\n\t\t\t\t\t\t\t\tif(towb == 1){\r\n\t\t\t\t\t\t\t\t\t\r\n\t                                    $('.j_op_remind').eq(0).show().html('操作成功，正在发往微博...').addClass('animate');\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t\t\t\t\t\t// if(data.url && data.url != '' && data.url != null)window.location.href = data.url;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t\t\t\t// \t$('.j_op_remind').eq(0).show().html(data.msg).addClass('animate');\r\n\t\t\t\t\t\t\t\t\t// \tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t// \t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t// \t}, 3000);\r\n\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t    },\r\n\t\t\t\t\t\terror: function(xhr, type){\r\n\t                        _input.val('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('.j_op_remind').eq(0).show().html('请您检查输入内容！').addClass('animate');\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t}\r\n\t\t    }\r\n\t\t}\r\n\t\t$(document).on('click tap', '.j_cmnt_single', function(){\r\n\t\t\tvar _this=this;\r\n\t\t\tif(checkLogin()){\r\n\t\t\t\t onCmnt.call(this);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsinglelogin = (typeof(WapLogin)== 'function') ?(new WapLogin()):this;\r\n\t\t\t\t\tsinglelogin.login (false,function(rs){\r\n\t\t\t\t\t\t// logsuccess(rs);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\toComment._addFloat();\r\n\t\t\t\t\t\toComment._addEvent();\r\n\t\t\t\t\t\tonCmnt.call(_this);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\tfunction onCmnt(){\r\n\t\t\tpop = $('#j_cmnt_pop'),\r\n\t\t\tinput = $('#j_cmnt_input');\r\n\t\t\tvar that = $(this),\r\n\t\t\t    nick = '回复' + that.parent().parent().parent().find('.cmnt_nick').eq(0).html().split('<')[0] + '：',\r\n\t\t\t    mid = that.parent().parent().parent().data('mid');\r\n\t\t\t// window.removeEventListener('scroll', addcomment, false);\r\n\t\t\toComment.commentShow();\r\n\t\t\tif(pop){\r\n\t\t\t\tinput.attr('placeholder', nick);\r\n\t\t\t\tpop.data('mid', mid);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// window.addEventListener(\"touchmove\", prevent, false);\r\n\t\t function sendMessage(content, Success , _this){\r\n\t\t \tpop = $('#j_cmnt_pop'),\r\n\t\t\tinput = $('#j_cmnt_input');\r\n\t\t    if(content == '' ){\r\n\t\t    \tif($('#tipsEmpty').length==0){\r\n\t\t    \t\t$('body').append('<aside id=\"tipsEmpty\" class=\"tipsCeng\" style=\"display: block;\"><div class=\"comment_remind animation_marker\"><p class=\"marker_t\">请输入评论内容！</p></div></aside>')\r\n\t\t    \t\tsetTimeout(function(){\r\n\t\t\t\t\t\t$('#tipsEmpty').hide();\r\n\t\t\t\t\t}, 3000);\r\n\t\t    \t}\r\n\t\t    \telse{\r\n\t\t    \t\t$('#tipsEmpty').show();\r\n\t\t    \t\tsetTimeout(function(){\r\n\t\t\t\t\t\t$('#tipsEmpty').hide();\r\n\t\t\t\t\t}, 3000);\r\n\t\t    \t}\r\n\t\t    }else{\r\n\t\t    \tif(content.indexOf('script') == -1){\r\n\t\t\t\t    entrance.css('opacity',1);\r\n\t\t\t\t    $('.articleHead').css('opacity',1);\r\n\t\t\t\t\t$('.cmnt_article').css('opacity',1);\r\n\t\t\t\t\t$('footer').css('opacity',1);\r\n\t\t\t\t\t$('.j_float_remind').show();\r\n\t\t\t\t\tif(pop.data('mid') && pop.data('mid') != ''){\r\n\t                    //对评论的评论\r\n\t                    var items = $('.cmnt_item'),\r\n\t                        index;\r\n\t                    for(i = 0; i < items.length; i++){\r\n\t                    \tif(items.eq(i).data('mid') == pop.data('mid')){\r\n\t                    \t\tindex = i;\r\n\t                    \t\tbreak;\r\n\t                    \t}\r\n\t                    }\r\n\t                    var item = items.eq(index),\r\n\t\t\t\t\t        floors = item.find('code').length + 1,\r\n\t\t\t\t\t        mid = item.data('mid'),\r\n\t\t\t\t\t        wbname = item.data('wbname'),\r\n\t\t\t\t\t        oCmnt = item.find('.cmnt_nick').eq(0).html(),\r\n\t\t\t\t\t        cmnt_nick = oCmnt.split('<')[0];\r\n\t\t\t\t\t        cmnt_sourse = item.find('.cmnt_nick').eq(0).find('em').html();\r\n\t                        cmnt_time = item.find('.cmnt_op_bottom_times').eq(0).html(),\r\n\t\t\t\t\t        base = item.find('.cmnt_base').eq(0),\r\n\t\t\t\t\t        text = item.find('.cmnt_text').last(),\r\n\t\t\t\t\t        wb_content = text.html(),\r\n\t\t\t\t\t        _base = item.find('.cmnt_base').length > 0 ? '<div class=\"cmnt_base\">' + base.html() + '</div>' : '',\r\n\t\t\t\t\t        _top = '<p class=\"cmnt_top\"><span>' + cmnt_nick + '</span><span class=\"cmnt_source\">' + cmnt_time + '&nbsp;&nbsp;'+cmnt_sourse+'</span><code>' + floors + '</code></p>',\r\n\t\t\t\t\t        _text = '<p class=\"cmnt_text\">' + text.html() + '</p>';\r\n\t\t\t\t\t    if(index > 9)item.remove();\r\n\t                    var append = '<div class=\"cmnt_base\">' + _base + _top + _text + '</div>';\r\n\t\t                var nick = userInfo.nick || userInfo.uname || '手机新浪网用户';\r\n\t\t                var old_list = $('#j_newslist').html();\r\n\t\t                $('#j_newslist').prepend('<div class=\"cmnt_item\"><p class=\"cmnt_top\"><span><img src=\"' + (userInfo.portrait_url || userInfo.userface)+ '\" /><i class=\"cmnt_nick\">' + nick + '</i></span></p>' + append + '<p class=\"cmnt_text\">' + content + '</p><div class=\"cmnt_op_bottom\"><p class=\"cmnt_op_bottom_times\">刚刚</p></div></div>');\r\n\t\t                if($('.cmnt_list').length > 1)window.scrollTo(0, $('.cmnt_list').eq(1).offset().top - 10);\r\n\t\t                var towb;\r\n\t\t                if($('#j_wb_sendcont').is(\":checked\"))towb = 1;\r\n\t\t                else towb = '';\r\n\t\t\t\t\t\tpop.data('mid','');\r\n\t\t\t\t\t\tif(item.data('wbuser') == 1){\r\n\t\t\t\t\t\t\tSuccess && Success.call(_this);\r\n\t                        $.ajax({\r\n\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\turl: 'aj/cmnt/post?',\r\n\t\t\t\t\t\t\t\t  // data to be added to query string:\r\n\t\t\t\t\t\t\t\tdata: {  product: CMNT.product, index: CMNT.index, vcode: CMNT.vcode, csrfcode : CMNT.csrfcode, csrftime : CMNT.csrftime, wburl : CMNT.wburl, vt: 4, cmntContent: content, mid: mid, nick: wbname, wb_content: wb_content, towb: towb},\r\n\t\t\t\t\t\t\t\t  // type of data we are expecting in return:\r\n\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\t\t\tif(data.status){\r\n\t\t\t\t\t\t\t\t\t\tif(towb == 1){\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t                                    $('.j_op_remind').eq(0).show().html('操作成功，正在发往微博...').addClass('animate');\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t\t\t\t\t\t\t\t// if(data.url && data.url != '' && data.url != null)window.location.href = data.url;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t\t\t\t\t\t// \t$('.j_op_remind').eq(0).show().html(data.msg).addClass('animate');\r\n\t\t\t\t\t\t\t\t\t\t\t// \tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t// \t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t\t\t// \t}, 3000);\r\n\t\t\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t\t\terror: function(xhr, type){\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tSuccess && Success.call(_this);\r\n\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\turl: 'aj/cmnt/post?',\r\n\t\t\t\t\t\t\t\t  // data to be added to query string:\r\n\t\t\t\t\t\t\t\tdata: {  product: CMNT.product, index: CMNT.index, vcode: CMNT.vcode, csrfcode : CMNT.csrfcode, csrftime : CMNT.csrftime, wburl : CMNT.wburl, vt: 4, cmntContent: content, mid: mid, towb: towb, wb_content: wb_content},\r\n\t\t\t\t\t\t\t\t  // type of data we are expecting in return:\r\n\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\t\t\tif(data.status){\r\n\t\t\t\t\t\t\t\t\t\tif(towb == 1){\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t                                    $('.j_op_remind').eq(0).show().html('操作成功，正在发往微博...').addClass('animate');\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t\t\t\t\t\t\t\t// if(data.url && data.url != '' && data.url != null)window.location.href = data.url;\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t\t\t\t\t\t// \t$('.j_op_remind').eq(0).show().html(data.msg).addClass('animate');\r\n\t\t\t\t\t\t\t\t\t\t\t// \tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t// \t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t\t\t// \t}, 3000);\r\n\t\t\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t\t\terror: function(xhr, type){\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//对文章评论\r\n\t                    var nick = userInfo.nick || userInfo.uname || '手机新浪网用户';\r\n\t\t                var append = '<div class=\"cmnt_item\"><p class=\"cmnt_top\"><span><img src=\"' + (userInfo.portrait_url || userInfo.userface)+ '\" /><i class=\"cmnt_nick\">' + nick + '</i></span></p><p class=\"cmnt_text\">' + content + '</p><div class=\"cmnt_op_bottom\"><p class=\"cmnt_op_bottom_times\">刚刚</p></div></div>',\r\n\t\t                    str = newslist.html(),\r\n\t\t                    towb;\r\n\t\t                if($('#j_wb_sendcont').is(\":checked\"))towb = 1;\r\n\t\t                else towb = '';\r\n\t\t                newslist.html(append + str);\r\n\t\t               if($('.cmnt_list').length > 1)window.scrollTo(0, $('.cmnt_list').eq(1).offset().top - 10);\r\n\t\t\t\t    \tSuccess && Success.call(_this);\r\n\t\t\t\t    \t$.ajax({\r\n\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\turl: 'aj/cmnt/post?',\r\n\t\t\t\t\t\t\t  // data to be added to query string:\r\n\t\t\t\t\t\t\tdata: { product: CMNT.product, index: CMNT.index, vcode: CMNT.vcode, csrfcode : CMNT.csrfcode, csrftime : CMNT.csrftime, wburl : CMNT.wburl, vt: 4,  cmntContent: content, towb: towb},\r\n\t\t\t\t\t\t\t  // type of data we are expecting in return:\r\n\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\ttimeout: 10000,\r\n\t\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\t\tif(data.status){\r\n\t\t\t\t\t\t\t\t\tif(towb == 1){\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t                                    $('.j_op_remind').eq(0).show().html('操作成功，正在发往微博...').addClass('animate');\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t\t\t\t\t\t\t// if(data.url && data.url != '' && data.url != null)window.location.href = data.url;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t\t\t\t\t// \t$('.j_op_remind').eq(0).show().html(data.msg).addClass('animate');\r\n\t\t\t\t\t\t\t\t\t\t// \tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t// \t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t\t\t\t\t// \t}, 3000);\r\n\t\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t\terror: function(xhr, type){\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('.j_op_remind').eq(0).show().html('请您检查输入内容！').addClass('animate');\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t}\r\n\t\t    }\r\n\t\t}\r\n\t}\r\n\tfunction initUnfold(){\r\n\t\t$(document).on('click tap', '.j_cmnt_unfold', function(){\r\n            var wrap = $(this).parent(),\r\n                pre = $(this).prev(),\r\n                sections = $(this).parent().find('.hide'),\r\n\t\t\t    top = wrap.find('.cmnt_top').last(),\r\n\t\t\t    text = wrap.find('.cmnt_text').last(),\r\n\t\t\t    quote = wrap.find('.cmnt_quote').last(),\r\n\t\t\t    str = '<div class=\"cmnt_base\">' + pre.html() + '</div>';\r\n\t\t\tif(sections.length < 8){\r\n\t\t\t\tfor(i = 0; i < sections.length; i ++){\r\n\t                str = '<div class=\"cmnt_base\">' + str + sections.eq(i).html() + '</div>';\r\n\t\t\t\t}\r\n\t\t\t\tif(!!quote.html()){\r\n\t\t\t\t\tquote = '<p class=\"cmnt_quote\">'+quote.html()+'</p>';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tquote = '';\r\n\t\t\t\t}\r\n\t\t\t\tstr += '<div class=\"cmnt_top\">' + top.html() + '</div>' +'<div class=\"cmnt_text\">' + text.html() + '</div>'+quote;\r\n\t\t\t\twrap.html(str);\r\n\t\t\t}else{\r\n\t\t\t\tfor(i = 0; i < sections.length; i ++){\r\n\t                if(i < 7)str = '<div class=\"cmnt_base\">' + str + sections.eq(i).html() + '</div>';\r\n\t                else if(sections.length == 7)'<div class=\"cmnt_base\">' + str + sections.eq(i).html() + '</div>';\r\n\t                else if(sections.length > 9){\r\n\t                \tif(i == 8)str = '<div class=\"cmnt_base\">' + str + '<div class=\"cmnt_extra\">' + sections.eq(i).html() + '</div>';\r\n\t                    else if(i < sections.length - 1)str += '<div class=\"cmnt_extra\">' + sections.eq(i).html() + '</div>';\r\n\t                    else str += '<div class=\"cmnt_extra\">' + sections.eq(i).html() + '</div></div>';\r\n\t                }\r\n\t                else if(sections.length == 8){\r\n\t                \tstr = '<div class=\"cmnt_base\">' + str + '<div class=\"cmnt_extra\">' + sections.eq(i).html() + '</div></div>';\r\n\t                }else{\r\n\t                \tif(i == 8)str = '<div class=\"cmnt_base\">' + str + '<div class=\"cmnt_extra\">' + sections.eq(i).html() + '</div>';\r\n\t                \telse str += '<div class=\"cmnt_extra\">' + sections.eq(i).html() + '</div></div>';\r\n\t                }\r\n\t\t\t\t}\r\n\t\t\t\tif(!!quote.html()){\r\n\t\t\t\t\tquote = '<p class=\"cmnt_quote\">'+quote.html()+'</p>';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tquote = '';\r\n\t\t\t\t}\r\n\t\t\t\tstr += '<div class=\"cmnt_extra\"><div class=\"cmnt_top\">' + top.html() + '</div>' +'<div class=\"cmnt_text\">' + text.html() + '</div>'+quote+'</div></div>';\r\n\t\t\t\twrap.html(str).addClass('nobd');\r\n\t\t\t    wrap.find('.cmnt_base').eq(0).addClass('nobd');\r\n\t\t\t    wrap.find('.cmnt_base').eq(1).addClass('nomg');\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction initFavor(){\r\n\t\t$(document).on('click tap', '.j_favor_single', function(){\r\n\t\t\tif((!$(this).data('loading') || $(this).data('loading') == 'no') && !$(this).hasClass('on')){\r\n\t\t\t\t$(this).data('loading','yes');\r\n                var mid, op;\r\n                if($(this).parent().hasClass('cmnt_op')){\r\n                \tmid = $(this).parent().parent().parent().data('mid');\r\n                \top = $(this).parent().parent().parent().find('.j_favor_single').eq(0);\r\n                }else{\r\n                \tmid = $(this).parent().parent().data('mid');\r\n                \top = $(this).parent().parent().find('.j_favor_single').eq(1);\r\n                }\r\n\t\t\t\tif (mid == '') {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tvar voteNum = parseInt($(this).html());\r\n\t\t\t\tvoteNum += 1;\r\n\t\t\t\t$(this).html(voteNum).addClass('on');\r\n\t\t\t\top.html(voteNum).addClass('on');\r\n\t\t\t\t$(this).append($('<i class=\"fly\"></i>'));\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype : 'POST',\r\n\t\t\t\t\tdata : {\r\n\t\t\t\t\t\t'mid' : mid,\r\n\t\t\t\t\t\t'product' : CMNT.product,\r\n\t\t\t\t\t\t'index' : CMNT.index,\r\n\t\t\t\t\t\t'csrfcode' : CMNT.csrfcode,\r\n\t\t\t\t\t\t'csrftime' : CMNT.csrftime\r\n\t\t\t\t\t},\r\n\t\t\t\t\turl : 'aj/cmnt/vote?tj_ch='+__tj_ch,\r\n\t\t\t\t\tsuccess : function(data){\r\n\t\t\t\t\t\t$(this).data('loading','no');\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror : function(xhr, type){\r\n\t\t\t\t\t\t$(this).data('loading','no');\r\n\t\t\t\t\t\t/*$('.j_op_remind').eq(0).html('操作失败！').addClass('animate');\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t$('.j_op_remind').eq(0).html('').removeClass('animate').hide();\r\n\t\t\t\t\t\t}, 3000);*/\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction checkItem(e){\r\n        //利用循环查找符合CSS样式名字的对象\r\n\t\twhile(e.className != \"cmnt_item\"){\r\n\t\t//如果这个对象的标签名字是HTML就停止,然后让事件对象不存在,用做后面的判断\r\n\t\t\tif(e.tagName == \"HTML\" || e.tagName == \"A\" || (e.className == 'cmnt_top' && e.parentNode.className == 'cmnt_item')){\r\n\t\t\t\te = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t}else{\r\n\t\t\t\t//否则继续下个对象,即他的父对象\r\n\t\t\t\te = e.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//返回事件对象,如果事件对象不存在返回假\r\n\t\treturn e;\r\n\t}\r\n\t// function initOp(){\r\n\t// \tvar done = false;\r\n\t// \t$(document).on('click tap', '.j_op_unfold', function(){\r\n //            var timer,\r\n //                ops = $('.cmnt_op_all'),\r\n //                op = $(this).parent().parent().parent().find(\".cmnt_op_all\").eq(0);\r\n //            ops.removeClass('fadeIn').removeClass('fadeOut');\r\n\t// \t\top.removeClass('fadeOut').addClass('fadeIn');\r\n\t// \t});\r\n\t// \t$(document).on('click tap', '.j_op_fold', function(){\r\n //            var timer,\r\n //                op = $(this).parent();\r\n\t// \t\top.removeClass('fadeIn').addClass('fadeOut');\r\n\t// \t});\r\n\t// \t$(document).on('touchstart', function (e){\r\n\t// \t\tdone = false;\r\n //            if(!e)e = window.event;\r\n\t// \t\tvar Event = e.target?e.target:e.srcElement;\r\n\t// \t\ttimer = setTimeout(function(){\r\n //                if(checkItem(Event) && !done){\r\n\t//                 var item = $(checkItem(Event)),\r\n\t// \t\t\t\t    ops = $('.cmnt_op_all'),\r\n\t// \t\t\t\t    op = item.find('.cmnt_op_all').eq(0);\r\n\t// \t            if(op.hasClass('fadeOut')){\r\n\t// \t            \tops.removeClass('fadeIn').removeClass('fadeOut');\r\n\t// \t            \top.addClass('fadeIn');\r\n\t// \t            }\r\n\t// \t            else if(op.hasClass('fadeIn')){\r\n\t// \t            \top.removeClass('fadeIn').addClass('fadeOut');\r\n\t// \t            }\r\n\t// \t            else{\r\n\t// \t            \tops.removeClass('fadeIn').removeClass('fadeOut');\r\n\t// \t            \top.addClass('fadeIn');\r\n\t// \t            }\r\n\t// \t\t\t}\r\n\t// \t\t},200);\r\n\t// \t});\r\n\t// \t$(document).on('touchmove', function (){\r\n\t// \t\tdone = true;\r\n //            var ops = $('.cmnt_op_all');\r\n\t// \t    ops.removeClass('fadeIn').removeClass('fadeOut');\r\n\t// \t});\r\n\t// }\r\n\tfunction getWinHeight(){\r\n\t\tvar wHeight = 640;\r\n\t\tif (window.innerHeight) {\r\n\t\t\twHeight = window.innerHeight;\r\n\t\t} else if (document.body && document.body.clientHeight) {\r\n\t\t\twHeight = document.body.clientHeight;\r\n\t\t} else if (document.documentElement && document.documentElement.clientHeight) {\r\n\t\t\twHeight = document.documentElement.clientHeight;\r\n\t\t}\r\n\t\treturn wHeight;\r\n\t}\r\n\tfunction initEntrance(){\r\n\t\tclearInterval(timer);\r\n\t\tvar timer = setInterval(function(){\r\n            var _top = $('.footer').eq(0).offset().top,\r\n                wHeight = getWinHeight(),\r\n                scrollY = document.body.scrollTop || document.documentElement.scrollTop,\r\n                entrance = $('#j_cmnt_entrance');\r\n            if(scrollY + wHeight >= _top && scrollY > 0)entrance.hide();\r\n            else entrance.show();\r\n\t\t}, 200);\r\n\t}\r\n\tvar loading = 0;\r\n\tvar isload=0;\r\n\tfunction pullLoader(){\r\n\t\tvar oMainpage=$('#mainpage');\r\n\t\twindow.onresize=function ()\r\n\t\t{\r\n\t\t\toMainpage.css('minHeight',document.documentElement.clientHeight+'px');\r\n\t\t};\r\n\t\twindow.addEventListener('scroll', addcomment, false);\r\n\t}\r\n\tfunction addcomment(ev){\r\n\t\tvar oPullLoaderContent=$('#pullLoaderContent');\r\n\t\tvar oRe=$('.pullLoader')[0];\r\n\t\tvar oLoader=$('#j_pullLoader');\r\n\t\tif(loading == 0){\r\n\t\t\tvar sTop = document.body.scrollTop || document.documentElement.scrollTop,\r\n\t\t\tdHeight = $(document).height(),\r\n\t\t\tcHeight = document.documentElement.clientHeight;\r\n\t\t\tif(sTop + cHeight>= dHeight-cHeight){\r\n\t\t\t\tloading = 1;\r\n\t\t\t\t// oImg.className='rotate_forever';\r\n\t\t\t\toLoader.removeClass('hide');\r\n\t\t\t\t// ajax加载 结束后执行下面代码\r\n\t\t\t\tif(!isload){\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tloadMoreApply(complete);\r\n\t\t\t\t\t},100)\r\n\t\t\t\t\tisload = 1;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tloadMoreApply(complete);\r\n\t\t\t\t}\r\n\t\t\t\tfunction complete(){\r\n\t\t\t\t\toLoader.addClass('hide');\r\n\t\t\t\t\tloading = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (window.suda) {\r\n\t\t\t\t\tvar sudaName = oLoader.data('sudaclick');\r\n\t\t\t\t\tif(sudaName){\r\n\t\t\t\t\t\tvar clickInfo = {\r\n\t\t\t\t\t\t\t'type' : 'loaderMore',\r\n\t\t\t\t\t\t\t'name' : sudaName,\r\n\t\t\t\t\t\t\t'title': '评论上拉加载统计',\r\n\t\t\t\t\t\t\t'index': 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(window.suds_count){\r\n\t\t\t\t\t\twindow.suds_count(clickInfo);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// $('#j_input_top').on('focus',function(){\r\n\t// \t$(this).addClass('on');\r\n\t// })\r\n\t// $('#j_input_top').on('blur',function(){\r\n\t// \t$(this).removeClass('on');\r\n\t// })\r\n\tsetTimeout(function(){\r\n\t\t// initOp();                 //评论操作区\r\n\t\t//itemInit();             //评论点击弹出操作区\r\n\t\tinitPopInput();           //文章评论弹出\r\n\t\t//initPopSingleInput();   //单条评论弹出\r\n\t\tinitUnfold();             //展开评论楼层\r\n\t\tinitFavor();              //评论赞\r\n\t\tmoreList();               //加载更多评论\r\n\t\tinitEntrance();           //评论入口\r\n\t\tpullLoader();\t\t\t  //上拉加载\r\n\t},300);\r\n})\r\n /*\r\n  * 评论举报\r\n  * @author :    袁远(yuanyuan23)\r\n  * @date :      2014-10-13\r\n  * @changeBy : tingling\r\n  */\r\n $(function() {\r\n     var sendData = {},\r\n     \t$curReportBox = null;\r\n     function insertReportList() {\r\n         var arr = [];\r\n         arr.push('<div id =\"j_report\" class=\"hide\">');\r\n         arr.push('<div class=\"comment_report animation_marker hide\" id=\"j_tipsReport\"><p class=\"marker_t\">举报成功</p></div>');\r\n         arr.push('<div class=\"report_box\" id=\"j_report_box\">');\r\n         arr.push('<h2 class=\"report_title\">举报</h2>');\r\n         arr.push('<span class=\"report_reason\">请您选择举报的原因</span>');\r\n         arr.push('<div class=\"report_select_box\" id=\"j_select_box\">');\r\n         arr.push('<a class=\"report_select\" href=\"javascript:;\" >反动言论</a><a class=\"report_select\" href=\"javascript:;\" >广告营销</a><a class=\"report_select\" href=\"javascript:;\" >淫秽色情</a><a class=\"report_select\" href=\"javascript:;\" >人身攻击</a><a class=\"report_select\" href=\"javascript:;\" >虚假中奖</a>');\r\n         arr.push('</div>');\r\n         arr.push('<div class=\"report_btn_box\">');\r\n         arr.push('<span class=\"fl\"><a href=\"javascript:;\" class=\"report_cancel\" id=\"j_report_cancel\" >取消</a></span><span class=\"fr\"><a href=\"javascript:;\" class=\"report_smt off\" id=\"j_report_smt\" >确定</a></span>');\r\n         arr.push('</div></div>');\r\n         arr.push('<div class=\"report_bg\" id=\"j_report_bg\"></div>');\r\n         arr.push('</div>');\r\n         $('body').append(arr.join(''));\r\n         addEvent();\r\n     }\r\n     function chooseReason() {\r\n         var aA = $('#j_select_box a');\r\n         var oSmt = $('#j_report_smt');\r\n         var oCancel = $('#j_report_cancel');\r\n         var oMainpage = $('#mainpage');\r\n         var oBg = $('#j_report_bg');\r\n         var oTipsReport = $('#j_tipsReport');\r\n         var oReportbox = $('#j_report_box');\r\n         var oReport = $('#j_report');\r\n         var obj = $(this).parents('.cmnt_item');\r\n         var that = this;\r\n         if (oReport.length == 0) {\r\n             insertReportList();\r\n         };\r\n         sendData = {\r\n             mid: obj.data('mid'),\r\n             charge_uid: obj.data('chargeuid') || '',\r\n             content: obj.parents('.com_cont_op').prev().html(),\r\n             charge_ip: obj.data('chargeip') || '',\r\n             ch: $('#cmnt_channel').val() || '',\r\n             newsid: obj.data('newsid') || '',\r\n             url: window.location.href || '',\r\n             jsoncallback: 'changeFunction'\r\n         };\r\n         $curReportBox = $(this);\r\n         if ($(this).hasClass('on')) {\r\n             return;\r\n             if ($(this).hasClass('off')) {\r\n                 return;\r\n             }\r\n             aA.removeClass('on');\r\n             oReport.removeClass('hide');\r\n             oTipsReport.removeClass('hide');\r\n             oReportbox.addClass('hide');\r\n             oBg.addClass('hide');\r\n             window.removeEventListener(\"touchmove\", prevent, false);\r\n             $curReportBox && ($curReportBox.addClass('on'));\r\n             $curReportBox && ($curReportBox.text('已举报'));\r\n             setTimeout(function() {\r\n                 oReport.addClass('hide');\r\n                 oTipsReport.addClass('hide');\r\n             }, 1000)\r\n             $curReportBox && ($curReportBox = null);\r\n             return false;\r\n         }\r\n         window.addEventListener(\"touchmove\", prevent, false);\r\n         oReport.removeClass('hide');\r\n         oReport.removeClass('hide');\r\n         oReportbox.removeClass('hide');\r\n         oBg.removeClass('hide');\r\n         return false;\r\n     }\r\n     function addEvent() {\r\n         var aA = $('#j_select_box a');\r\n         var oSmt = $('#j_report_smt');\r\n         var oCancel = $('#j_report_cancel');\r\n         var oMainpage = $('#mainpage');\r\n         var oBg = $('#j_report_bg');\r\n         var oTipsReport = $('#j_tipsReport');\r\n         var oReportbox = $('#j_report_box');\r\n         var that = '.j_report';\r\n         var oReport = $('#j_report');\r\n         aA.on('click', function() {\r\n             aA.removeClass('on');\r\n             $(this).addClass('on');\r\n             oSmt.removeClass('off');\r\n             sendData.type = $(this).index();\r\n         });\r\n         oCancel.on('click', function() {\r\n             oReport.addClass('hide');\r\n             window.removeEventListener(\"touchmove\", prevent, false);\r\n         });\r\n         oBg.on('click', function() {\r\n             oReport.addClass('hide');\r\n             window.removeEventListener(\"touchmove\", prevent, false);\r\n         });\r\n         oSmt.on('click', function() {\r\n             if ($(this).hasClass('off')) {\r\n                 return;\r\n             }\r\n             aA.removeClass('on');\r\n             oTipsReport.removeClass('hide');\r\n             oReportbox.addClass('hide');\r\n             oBg.addClass('hide');\r\n             window.removeEventListener(\"touchmove\", prevent, false);\r\n             $curReportBox && ($curReportBox.addClass('on'));\r\n             $curReportBox && ($curReportBox.text('已举报'));\r\n             setTimeout(function() {\r\n                 oReport.addClass('hide');\r\n                 oTipsReport.addClass('hide');\r\n             }, 1000)\r\n             sendReport(sendData);\r\n             $curReportBox && ($curReportBox = null);\r\n         });\r\n     }\r\n     function report() {\r\n         if ($('.j_report').length > 0) {\r\n             $('body').on('click tap', '.j_report', function() {\r\n                 checkLogin(chooseReason.bind(this));\r\n                 return false;\r\n             })\r\n         }\r\n     }\r\n     function checkLogin(nextFun, closeFun) {\r\n         var waplogin = (typeof(WapLogin) == 'function') ? (new WapLogin()) : this;\r\n         if (!userInfo || typeof(userInfo) == 'undefined') {\r\n             waplogin.login(false, function() {\r\n                 nextFun && nextFun();\r\n             });\r\n         } else {\r\n             nextFun && nextFun();\r\n         }\r\n     }\r\n     function updateUserInfo(re) {\r\n         if (typeof(re) != 'undefined' && typeof(re.nick) != 'undefined') {\r\n             window.userInfo = {};\r\n             window.userInfo.uname = re.nick;\r\n             window.userInfo.userface = re.portrait;\r\n             window.userInfo.uid = re.uid;\r\n             window.userInfo.islogin = 1;\r\n         }\r\n     }\r\n     function sendReport(data) {\r\n         $.ajax({\r\n             type: 'GET',\r\n             data: data,\r\n             url: 'http://o.cmnt.sina.cn/v2/charge',\r\n             dataType: 'jsonp',\r\n             async: false\r\n         });\r\n     }\r\n     window.changeFunction = function(rs) {\r\n         console.log(re);\r\n     }\r\n     function prevent(e) {\r\n         //引导浮层存在时禁止页面滚动\r\n         e.preventDefault();\r\n         return;\r\n     }\r\n     setTimeout(function() {\r\n         insertReportList();\r\n         report();\r\n     }, 300)\r\n })\r\n"]}